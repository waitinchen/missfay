[phases.setup]
nixPkgs = ["python311", "python311Packages.pip", "gcc", "gnumake", "zlib"]

[phases.install]
cmds = [
    "pip install --break-system-packages -r requirements_phi.txt",
    # 强制安装 grpcio 的二进制版本，避免 Nix 环境编译失败
    "pip install --break-system-packages --upgrade grpcio grpcio-tools"
]

[phases.build]
cmds = []

[start]
cmd = "PYTHONPATH=$PYTHONPATH:. python3 -m uvicorn voice_bridge:app --host 0.0.0.0 --port $PORT"


